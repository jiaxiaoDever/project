/*!
* yhui 1.3.0beta
* yhHead.js
* 2013-04-23
*/
(function(e,t){"use strict";function i(){}function r(e,t){if(e){"object"==typeof e&&(e=[].slice.call(e));for(var i=0,r=e.length;r>i;i++)t.call(e,e[i],i)}}function a(e,i){var r=Object.prototype.toString.call(i).slice(8,-1);return i!==t&&null!==i&&r===e}function n(e){return a("Function",e)}function s(e){return a("Array",e)}function o(e){var t=e.split("/"),i=t[t.length-1],r=i.indexOf("?");return-1!==r?i.substring(0,r):i}function l(e){e=e||i,e._done||(e(),e._done=1)}function d(e){var t={};if("object"==typeof e)for(var i in e)e[i]&&(t={name:i,url:e[i]});else t={name:o(e),url:e};var r=D[t.name];return r&&r.url===t.url?r:(D[t.name]=t,t)}function c(e){e=e||D;for(var t in e)if(e.hasOwnProperty(t)&&e[t].state!==$)return!1;return!0}function u(e){e.state=I,r(e.onpreload,function(e){e.call()})}function h(e){e.state===t&&(e.state=T,e.onpreload=[],f({url:e.url,type:"cache"},function(){u(e)}))}function p(e,a){return a=a||i,e.state===$?(a(),t):e.state===N?(x.ready(e.name,a),t):e.state===T?(e.onpreload.push(function(){p(e,a)}),t):(e.state=N,f(e,function(){e.state=$,a(),r(j[e.name],function(e){l(e)}),b&&c()&&r(j.ALL,function(e){l(e)})}),t)}function f(t,r){function a(t){t=t||e.event,s.onload=s.onreadystatechange=s.onerror=null,r()}function n(t){t=t||e.event,("load"===t.type||/loaded|complete/.test(s.readyState)&&(!y.documentMode||9>y.documentMode))&&(s.onload=s.onreadystatechange=s.onerror=null,r())}r=r||i;var s;/\.css[^\.]*$/.test(t.url)?(s=y.createElement("link"),s.type="text/"+(t.type||"css"),s.rel="stylesheet",s.href=t.url):(s=y.createElement("script"),s.type="text/"+(t.type||"javascript"),s.src=t.url),s.onload=s.onreadystatechange=n,s.onerror=a,s.async=!1,s.defer=!1;var o=y.head||y.getElementsByTagName("head")[0];o.insertBefore(s,o.lastChild)}function g(){return y.body?(b||(b=!0,r(_,function(e){l(e)})),t):(e.clearTimeout(x.readyTimeout),x.readyTimeout=e.setTimeout(g,50),t)}function m(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",m,!1),g()):"complete"===y.readyState&&(y.detachEvent("onreadystatechange",m),g())}var v,b,y=e.document,_=[],w=[],j={},D={},k="async"in y.createElement("script")||"MozAppearance"in y.documentElement.style||e.opera,C=e.head_conf&&e.head_conf.head||"head",x=e[C]=e[C]||function(){x.ready.apply(null,arguments)},T=1,I=2,N=3,$=4;if(x.load=k?function(){var e=arguments,t=e[e.length-1],i={};return n(t)||(t=null),r(e,function(r,a){r!==t&&(r=d(r),i[r.name]=r,p(r,t&&a===e.length-2?function(){c(i)&&l(t)}:null))}),x}:function(){var e=arguments,t=[].slice.call(e,1),i=t[0];return v?(i?(r(t,function(e){n(e)||h(d(e))}),p(d(e[0]),n(i)?i:function(){x.load.apply(null,t)})):p(d(e[0])),x):(w.push(function(){x.load.apply(null,e)}),x)},x.js=x.load,x.test=function(e,t,r,a){var n="object"==typeof e?e:{test:e,success:t?s(t)?t:[t]:!1,failure:r?s(r)?r:[r]:!1,callback:a||i},o=!!n.test;return o&&n.success?(n.success.push(n.callback),x.load.apply(null,n.success)):!o&&n.failure?(n.failure.push(n.callback),x.load.apply(null,n.failure)):a(),x},x.ready=function(e,t){if(e===y)return b?l(t):_.push(t),x;if(n(e)&&(t=e,e="ALL"),"string"!=typeof e||!n(t))return x;var i=D[e];if(i&&i.state===$||"ALL"===e&&c()&&b)return l(t),x;var r=j[e];return r?r.push(t):r=j[e]=[t],x},x.ready(y,function(){c()&&r(j.ALL,function(e){l(e)}),x.feature&&x.feature("domloaded",!0)}),"complete"===y.readyState)g();else if(y.addEventListener)y.addEventListener("DOMContentLoaded",m,!1),e.addEventListener("load",g,!1);else{y.attachEvent("onreadystatechange",m),e.attachEvent("onload",g);var q=!1;try{q=null==e.frameElement&&y.documentElement}catch(M){}q&&q.doScroll&&function S(){if(!b){try{q.doScroll("left")}catch(i){return e.clearTimeout(x.readyTimeout),x.readyTimeout=e.setTimeout(S,50),t}g()}}()}setTimeout(function(){v=!0,r(w,function(e){e()})},300)})(window),function(e){function t(e){var t=e.match(/.*(?=\/.*$)/);return(t?t[0]:".")+"/"}function i(e){return e.indexOf("://")>0||0===e.indexOf("//")}function r(e){return 0===e.indexOf("./")}function a(e){return 0===e.indexOf("../")}function n(e){var t=/\w+\/\.\.\//;return e=e.replace(t,""),e.indexOf("../")>-1?arguments.callee(e):e}function s(t){if(0===t.indexOf("/")){var i=e.location;return i.protocol+"//"+i.host+t}return t}function o(e){var t;return e=s(e),i(e)&&(t=e),r(e)&&(t=u+e.substring(2)),a(e)&&(t=n(u+e)),t}if(!e.YHUI||!e.YHUI.use){var l=document.getElementsByTagName("script"),d=l.length,c=l[d-1],u=t(c.src),h=function(){this.config=e.yhuiConfig||{}};h.prototype={constructor:h,version:"1.3.0beta",assets:{jquery:{src:"./jquery-1.8.3.js",relyOn:[]},jqueryui:{src:"./jquery-ui.js",relyOn:["jquery"]},jquerylayout:{src:"./jquery.layout-latest.js",relyOn:["jqueryui"]},yhCore:{src:"./yhCore.js",relyOn:["jquery","globalize"]},yhLayout:{src:"../jquery.yhLayout.js",relyOn:["jquerylayout","yhCore"]},yhContextMenu:{src:"../jquery.yhContextMenu.js",relyOn:["jqueryui","yhCore"]},yhThemePicker:{src:"../jquery.yhThemePicker.js",relyOn:["yhCore"]},yhTabs:{src:"../jquery.yhTabs.js",relyOn:["yhContextMenu"]},yhMenu:{src:"../jquery.yhMenu.js",relyOn:["jqueryui","yhCore"]},yhWindow:{src:"../jquery.yhWindow.js",relyOn:["yhContextMenu"]},yhScrollTab:{src:"../jquery.yhScrollTab.js",relyOn:["jqueryui"]},yhPortlet:{src:"../jquery.yhPortlet.js",relyOn:["jqueryui","yhCore"]},yhDialogTip:{src:"../jquery.yhDialogTip.js",relyOn:["jqueryui","yhCore"]},yhDropDown:{src:"../jquery.yhDropDown.js",relyOn:["yhLoading","zTree"]},yhToolbar:{src:"../jquery.yhToolbar.js",relyOn:["jquery"]},yhFormField:{src:"../jquery.yhFormField.js",relyOn:["jqueryui","yhCore"]},yhDatePicker:{src:"../jquery.yhDatePicker.js",relyOn:["jqueryui","yhCore","mousewheel"]},yhButton:{src:"../jquery.yhButton.js",relyOn:["jqueryui"]},yhSwitchPanel:{src:"../jquery.yhSwitchPanel.js",relyOn:["yhLoading"]},yhSelector:{src:"../jquery.yhSelector.js",relyOn:["jqueryui"]},yhValidate:{src:"../jquery.yhValidate.js",relyOn:["jqueryui","yhCore"]},yhPlaceholder:{src:"../jquery.yhPlaceholder.js",relyOn:["jqueryui","yhCore"]},yhSearchBox:{src:"../jquery.yhSearchBox.js",relyOn:["jqueryui","yhCore","yhPlaceholder"]},yhGrid:{src:"../jquery.yhGrid.js",relyOn:["jqGrid"]},yhSelectmenu:{src:"../jquery.yhSelectmenu.js",relyOn:["jqueryui","yhCore"]},yhTreemenu:{src:"../jquery.yhTreemenu.js",relyOn:["zTree","yhContextMenu"]},yhLoading:{src:"../jquery.yhLoading.js",relyOn:["jqueryui","yhCore"]},JSON:{src:"../plugin/json2.js",relyOn:[]},mousewheel:{src:"../plugin/jquery.mousewheel.js",relyOn:["jquery"]},zTree:{src:"../plugin/jquery.ztree.js",relyOn:["jquery"]},jqGrid:{src:"../plugin/jquery.jqGrid.js",relyOn:["yhContextMenu"]},datetimepicker:{src:"../plugin/jquery-ui-datetimepicker.js",relyOn:["jqueryui"]},globalize:{src:"../plugin/globalize.js",relyOn:[]}},use:function(t,i){if(!t)return alert("请键入所需模块 ←_←");t&&t instanceof Function&&(i=t,t="jqueryui");var r,a,n=this.log,s=this.assets,l=[],d=[],c=function(e){var t=null,i=0,r=e.length,l=[];if(r)for(;r>i;i++)t=s[e[i]],t?(l=t.relyOn,t.loaded||(l.length&&arguments.callee(l),a=o(t.src),a&&d.push(a),t.loaded=!0)):n("没有找到 "+e[i]+" 模块")};l=t.indexOf(",")>=0?t.split(/\s*,\s*/):t.split(/\s+/),this.config&&this.config.assets&&this.extend(this.assets,this.config.assets),c(l),i instanceof Function&&(r=function(){$(function(){var e=$.uaMatch(navigator.userAgent);$(document.documentElement).addClass("msie"===e.browser?"yhui-ie yhui-ie"+parseInt(e.version):"mozilla"===e.browser?"yhui-ff":"yhui-"+e.browser),i.apply(this,arguments)})},d.push(r)),window.JSON||d.unshift(o(this.assets.JSON.src)),head.js.apply(e,d)},log:function(t){e.console?console.log(t):alert(t)},extend:function(){for(var e,t,i=arguments[0],r=arguments.length,a=1;r>a;a++)if(null!=(e=arguments[a]))for(t in e)t in i?alert("已经存在"+t+"模块！"):i[t]=e[t];return i}},e.YHUI=new h}}(window);