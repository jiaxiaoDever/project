/*!
* yhui 1.3.0beta
* jquery.yhButton.js
* 2013-04-23
*/
(function(e){var t={},i=[];e.widget("yhui.yhButton",{version:"1.3.0beta",options:{},_consts:{DOMSTRING:'<a id = "idHolder" class = "yhui-btn" href="javascript:void(0)"><span class = "yhui-form-icon classHolder"></span>textHolder</a>',NAME2CLASS:{submit:"yhui-btn-submit",back:"yhui-btn-back",confirm:"yhui-btn-confirm",save:"yhui-btn-save",reset:"yhui-btn-reset",cancel:"yhui-btn-cancel",close:"yhui-btn-close",search:"yhui-btn-search",disabled:"yhui-btn-disabled"},NAME2TEXT:{submit:"提交",back:"返回",confirm:"确定",save:"保存",reset:"重置",cancel:"取消",close:"关闭",search:"查询"},ID:"yhButton_"},_create:function(){this._initDom(),this._events()},_init:function(){this.options.align&&this._checkAlign(this.options.align),this.options.space&&this._checkSpace(this.options.space),i.length&&e(i.join(",")).addClass(this._consts.NAME2CLASS.disabled).on("click.yhButton",function(){return!1})},_initDom:function(){var s=this,n=this.options.items,a=0,o=n.length,r=!1,h="",l=[],d="";if(!n||!e.isArray(n))return e.yhui.log("请检查items属性是否为数组！");for(this.element.addClass("yhui-button").empty(),this.wrap=e("<div class = 'yhui-btn-holder yhui-button-inner'></div>").appendTo(this.element);o>a;a++)r=!!n[a].disabled,h=n[a].id||this._consts.ID+a,d=this._consts.DOMSTRING.replace(/classHolder/,this._consts.NAME2CLASS[n[a].type]).replace(/textHolder/,this._consts.NAME2TEXT[n[a].type]).replace(/idHolder/,h),r&&i.push("#"+h),"reset"!==n[a].type||n[a].onClick||(n[a].onClick=function(){var t=s.element.closest("form");t.length?t[0].reset():e.yhui.log("按钮不在表单中！")}),"submit"!==n[a].type||n[a].onClick||(n[a].onClick=function(){var t=s.element.closest("form");t.length?t.submit():e.yhui.log("按钮不在表单中！")}),"back"!==n[a]||n[a].onClick||(n[a].onClick=function(){}),l.push(d),n[a].onClick&&(t[h]=n[a].onClick);this.wrap.append(l.join(""))},_events:function(){var e=this;this.element.off("click.yhButton").on("click.yhButton","a",function(i){t[this.id]&&t[this.id].call(this,i,e.element.closest("form"),e.element,e)})},_checkAlign:function(t){var i=/^(left|center|right)((?:\+|-)\d+)?/.exec(t);i[1]&&!i[2]?this.wrap.css("textAlign",t):i[1]&&i[2]?this.wrap.css({textAlign:i[1],marginLeft:i[2]+"px"}):e.yhui.log("align的值不正确！")},_checkSpace:function(e){"number"==typeof e&&this.wrap.find("a").not(":first").css("marginLeft",e+"px")},_setOption:function(e,t){"align"===e&&this._checkAlign(t),"space"===e&&this._checkSpace(t),this._super(e,t)},enable:function(e){this.option("disable",!1);var t="a:has(span."+this._consts.NAME2CLASS[e]+"):first";this.element.find(t).removeClass(this._consts.NAME2CLASS.disabled).off("click.yhButton")},disable:function(e){this.option("disable",!0);var t="a:has(span."+this._consts.NAME2CLASS[e]+"):first";this.element.find(t).addClass(this._consts.NAME2CLASS.disabled).on("click.yhButton",function(){return!1})},isDisable:function(e){var t="a:has(span."+this._consts.NAME2CLASS[e]+"):first";return this.element.find(t).hasClass(this._consts.NAME2CLASS.disabled)}})})(jQuery);